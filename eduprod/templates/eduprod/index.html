{% extends "users/layout.html" %}
{% load static %}

{% block body %}
    <h1>Welcome, {{ user.username }}</h1>

    <h2>Flashcards</h2>

    {% if flashcards %}
        <div class="flashcard">
            <p class="question">{{ flashcards.0.front }}</p>
            <p class="answer" style="display: none;">{{ flashcards.0.back }}</p>
        </div>

        <div>
            <button id="revealBtn">Reveal Answer</button> 
            <button id="next-card-btn">Next Card</button>
            <form id="save-form" method="post">
                {% csrf_token %}
                <input type="hidden" name="flashcard_id" value="{{ flashcards.0.id }}">
                <button type="submit">Save Flashcard</button>
            </form>
        </div>

        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <script src="{% static 'js/flashcards.js' %}"></script>

        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const revealBtn = document.getElementById('revealBtn');
                const answer = document.querySelector('.flashcard .answer');

                revealBtn.addEventListener("click", function() {
                    answer.style.display = 'block';
                });
            });
        </script>
    {% else %}
        <p>No flashcards found.</p>
    {% endif %}

{% endblock %}
